好的，这是一个非常关键的问题。为客户提供清晰、准确、易于理解的文档，是确保项目成功交付的最后一步。

旧的文档是为**开发者**和**SOLO矿工**编写的，而新的交付物需要一份为**矿场运维者**量身定制的**部署与运维手册**。

基于我们之前的所有讨论，新的交付物除了 `pool-server` 和 `miner` 这两个二进制文件外，还需要提供一份**全新的 `README.md` 文档**。这份文档应该剔除所有与编译、开发相关的噪音，聚焦于客户最关心的：**如何部署、运行和监控**。

以下是新模式下交付物需要包含的核心信息，我会以一份“新版README”的结构来呈现：

---

### **新版交付文档 (`README.md`) 结构与内容**

**标题：Nockchain 矿池部署与运维手册**

**简介**
*   (保留并微调) `Nockchain` 的简短介绍。
*   **新增：** 本手册专门用于指导您部署**Nockchain矿池套件**。该套件包含两个核心程序：
    *   `pool-server`：指挥中心。负责同步区块链、管理矿工和分发任务。您的集群中**只需要运行一个**。
    *   `miner`：计算矿工。负责执行计算任务。您可以在所有剩余的机器上运行它。
*   **新增：** 本套件为局域网环境设计，可以最大限度发挥集群的挖矿效率。

---

**一、快速部署指南 (Quick Start)**

这部分是全新的，也是客户最需要看的。

1.  **准备工作**
    *   您已收到 `pool-server`, `miner`, 和 `nockchain-wallet` 三个文件。
    *   准备一台机器作为指挥中心（运行`pool-server`），并获取其内网IP地址（例如 `192.168.1.100`）。

2.  **步骤一：配置指挥中心 (`pool-server`)**
    *   将 `pool-server` 和 `nockchain-wallet` 两个文件拷贝到您的指挥中心机器上。
    *   **生成并配置收款地址 (仅需一次)：**
        ```bash
        # 1. 生成一个新的密钥对
        nockchain-wallet keygen
        ```
        该指令会输出您的公钥（Public Key）和助记词等信息。**请务必安全备份助记词!**
    *   **创建配置文件:**
        在 `pool-server` 相同目录下创建一个名为 `.env` 的文件，内容如下：
        ```
        MINING_PUBKEY=<此处粘贴你刚刚生成的公钥>
        RUST_LOG=info 
        ```
        这个公钥是您整个矿池的收款地址。

3.  **步骤二：启动指挥中心**
    *   在指挥中心机器上，运行：
        ```bash
        ./pool-server
        ```
    *   如果看到类似 `[INFO] Pool server listening on 0.0.0.0:7777` 的日志，说明指挥中心已成功启动并正在等待矿工连接。它会自动开始同步主网区块。

4.  **步骤三：启动计算矿工 (`miner`)**
    *   将 `miner` 文件拷贝到所有（例如179台）挖矿机器上。
    *   在每一台挖矿机器上，运行以下指令（请将IP地址和线程数替换为您自己的配置）：
        ```bash
        ./miner 192.168.1.100 -t 16
        ```
        *   `192.168.1.100`：指挥中心机器的内网IP地址。
        *   `-t 16`：您希望这台机器用于挖矿的CPU线程数。可以根据机器配置调整。

5.  **步骤四：验证系统运行状态**
    *   **在指挥中心的日志中**，您应该能看到矿工连接的日志，例如：
        `[INFO] Miner worker-01 connected. Total miners: 125`
        `[INFO] Accepted valid work from worker-01. Broadcasting block #54321...`
    *   **在计算矿工的日志中**，您会看到连接成功和提交工作的日志：
        `[INFO] Connected to pool at 192.168.1.100:7777`
        `[INFO] Received new work order #101`
        `[INFO] Found a solution! Submitting work...`
        `[INFO] Work accepted by pool.`

---

**二、FAQ (常见问题解答) - 矿池模式版**

这部分需要根据新模式重写。

*   **问：所有矿工 (`miner`) 可以使用同一个收款地址吗?**
    *   答：是的。新模式下，所有矿工都为指挥中心工作。收款地址**只在**指挥中心的 `.env` 文件中配置一次。所有矿工贡献的算力所获得的奖励，都会发送到这个地址。

*   **问：如何更换收款地址?**
    *   答：只需在指挥中心机器上，修改 `.env` 文件中的 `MINING_PUBKEY`，然后重启 `pool-server` 程序即可。计算矿工无需任何改动。

*   **问：网络有什么要求?**
    *   答：
        *   **指挥中心 (`pool-server`)**: 需要连接互联网，并且防火墙需要允许P2P端口（与旧版文档要求相同），以便与整个`nockchain`网络同步。
        *   **计算矿工 (`miner`)**: **无需连接互联网**。只需要能通过局域网访问到指挥中心机器的矿池端口（默认为 `7777`）即可。

*   **问：如何判断是否在挖矿?**
    *   答：观察指挥中心和计算矿工的日志。指挥中心日志会显示接收和验证矿工提交的工作，计算矿工日志会显示正在进行计算和提交结果。

*   **问："Failed to connect to pool" 错误是什么意思?**
    *   答：这是计算矿工的常见错误，意味着它无法连接到指挥中心。请检查：
        1.  指挥中心的IP地址是否正确。
        2.  指挥中心的 `pool-server` 程序是否正在运行。
        3.  局域网防火墙是否阻止了矿工访问指挥中心的 `7777` 端口。

*   **问：如何查看钱包余额?**
    *   答：在**指挥中心**机器上，使用 `nockchain-wallet` 查询。因为只有指挥中心在运行完整的节点。
        ```bash
        nockchain-wallet --nockchain-socket ./nockchain.sock list-notes-by-pubkey -p <您的公钥>
        ```

*   **问：如何管理日志输出?**
    *   答：在启动程序前设置 `RUST_LOG` 环境变量，或在指挥中心的 `.env` 文件中修改。这对于 `pool-server` 和 `miner` 都有效。例如，只看警告和错误：
        ```bash
        RUST_LOG=warn ./miner 192.168.1.100 -t 16
        ```

---

**总结：需要交付的信息变化**

| 旧文档 (SOLO模式) | 新文档 (矿池模式) | 理由 |
| :--- | :--- | :--- |
| 编译和环境安装 (`apt install`, `make`) | **完全移除** | 客户只使用编译好的文件，不关心开发环境。 |
| 单独运行节点/矿工的脚本 | **替换为** `pool-server` 和 `miner` 的直接启动指令 | 新的架构，新的操作方式。 |
| `MINING_PUBKEY` 在每台机器上配置 | **简化为** 只在 `pool-server` 的 `.env` 中配置一次 | 矿池模式下，收益地址是中心化的。 |
| 网络要求 (NAT, 防火墙等) | **分角色说明**：`pool-server` 要求不变，`miner` 只需局域网 | 职责分离导致网络需求不同。 |
| FAQ关注单节点问题 | **重写FAQ**，关注矿池协调、连接和常见错误 | 用户遇到的问题场景完全不同了。 |
| **(无)** | **新增** 清晰的四步部署指南 | 这是新模式的核心价值——易于部署。 |
| **(隐式)** | **显式提供** `nockchain-wallet` 并说明其用途 | 客户依然需要用它来生成和管理密钥。 |